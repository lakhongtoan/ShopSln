@{
    ViewData["Title"] = "ChangePassword";
}

<div class="container mt-4">
    <h2 class="mb-4">Đổi mật khẩu</h2>

    <div class="card p-4 shadow-sm">

        @if (ViewBag.Error != null)
        {
            <div class="alert alert-danger">@ViewBag.Error</div>
        }

        @if (ViewBag.Success != null)
        {
            <div class="alert alert-success">@ViewBag.Success</div>
        }

        <form method="post">

            <label>Mật khẩu hiện tại</label>
            <div class="position-relative mb-3">
                <input type="password" name="oldPassword" id="oldPassword" class="form-control" required />
                <i class="fa fa-eye toggle" data-target="oldPassword"></i>
            </div>

            <label>Mật khẩu mới</label>
            <div class="position-relative mb-3">
                <input type="password" name="newPassword" id="newPassword" class="form-control" required />
                <i class="fa fa-eye toggle" data-target="newPassword"></i>
            </div>

            <label>Xác nhận mật khẩu mới</label>
            <div class="position-relative mb-4">
                <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" required />
                <i class="fa fa-eye toggle" data-target="confirmPassword"></i>
            </div>

            <button type="submit" class="btn btn-primary w-100">Cập nhật mật khẩu</button>
        </form>
    </div>
</div>

<style>
    .toggle {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        opacity: 0.6;
    }

        .toggle:hover {
            opacity: 1;
        }
</style>

<script>
    document.querySelectorAll(".toggle").forEach(icon => {
        icon.addEventListener("click", function () {
            const target = document.getElementById(this.dataset.target);
            const type = target.type === "password" ? "text" : "password";
            target.type = type;

            this.classList.toggle("fa-eye");
            this.classList.toggle("fa-eye-slash");
        });
    });
</script>
